## Документация

### Описание работы основных функций программы

Data class **TrieNode**
```kotlin
    data class TrieNode<Key>(var key: Key?, var parent: TrieNode<Key>?) {
        /*...*/
    }
```
Data class TrieNode реализует структуру единичной ноды префиксного дерева,
которое используется для хранения словаря словоформ.

Class **Trie**
```kotlin
    class Trie<Key> {
        /*...*/
    }
```
Class Trie реализует структуру префиксного дерева для хранения словаря словоформ.
Trie имеет методы: <br>
* __insert__ - добавляет слова в префиксное дерево
* __findIndex__ - ищет слово в префиксном дереве и возвращает его индекс. 
                  Если слово не найдено, функция возвращает значение -1
    > index - порядковый номер строчки в словаре, определяющий уникальный номер 
    конкретного слова и всех его словоформ

Class **Word**
```kotlin
    class Word(index: Long) {
        /*...*/
    }
```
Class Word реализует структуру единичного слова из текстового индекса. В полях класса хранится
необходимая для анализа информация.
Word имеет методы: <br>
* __addForm__ - добавляет новую встретившуюся форму слова к имеющимся
* __addPage__ - добавляет новую страницу, на которой встретилось слово к имеющимся
* __addLine__ - добавляет новую строку, на которой встретилось слово к имеющимся
* __increaseAmount__ - увеличивает счетчик подсчета встречаемости слова

Функция **printMostUsedWords**
```kotlin
    fun printMostUsedWords(dict: Trie<Char>, fileName: String, topNWords: Int) {
        /*...*/
    }
```
Функция printMostUsedWords принимает данные из JSON файла и ищет 
необходимое количество слов удовлетворяющих критериям.
* Длина более 4 символов
* Индекс не равен -1

Class **Interface : CliktCommand()** 
```kotlin
    class Interface : CliktCommand() {
        /*...*/
    }
```

Class Interface : CliktCommand() реализует интерфейс командной строки при использовании библиотеки CliKt 
и позволяет считывать аргументы по заданным ключам. Он основываясь на полученных от пользователя данных
проверяет их корректность и запускает определенный режим работы программы.

Функция **analyzeText**
```kotlin
fun analyzeText(file: String) {
        /*...*/
    }
```
Функция analyzeText принимает на вход путь к файлу, для которого еще не построен индекс,
анализирует текст, создавая Map из объектов типа Word, куда кладет все необходимые 
для анализа данные и потом записывает объект на диск по специальному пути.

### Тестирование
Тесты находятся в файле src/test/kotlin/TextIndexTests <br>
Запустить тесты можно командой **gradle test**

### Запуск
Jar файл собирается по команде: **gradle runJar** <br>
Далее он запускается по команде: **java -jar build/libs/runnable-1.0-SNAPSHOT.jar** <br>
Желаемое поведение программы задается с помощью аргументов: <br>
Номер задания можно выбрать с помощью специального ключа: **"--task"** <br>
Поведение программы в зависимости от номера выбранного задания соответствует функционалу 
различных режимов 1, 2 и 3, указанных в файле "TASK.md" <br> 
Ключ для получения подсказок относительно управления: **"--help"** <br>
Задать слово для поиска: **"--word"** <br>
Задать категорию для поиска: **"--category"** <br>
Задать путь к файлу с текстом для анализа: **"--input"** <br>
Задать желаемый размер списка из наиболее употребляемых в тексте слов: **"--top"** <br>
Пример использования ключей: <br>
``` 
java -jar build/libs/runnable-1.0-SNAPSHOT.jar --task 2 --word ужин --category еда --top 10 --input ./data/Childhood.txt
```

### Входные данные <br>
Файл с текстом для анализа должен быть в формате .txt, путь к нему должен быть указан либо относительно 
точки входа в программу, либо абсолютным образом. <br> 
Слово для поиска должно содержать исключительно символы кириллицы и/или латиницы. <br> 
Желаемый размер списка из наиболее употребляемых в тексте слов не должен превышать общее количество 
различных слов в текстовом файле. <br> 
Указанная для поиска категория должна присутствовать в файле "data/categories.txt" <br>
Указанный номер задания должен равняться 1, 2 или 3. <br>

### Выходные данные
В результате работы программы в зависимости от задания выводятся различные данные полученные 
в процессе анализа заданного текста. <br> 
Пример выходных данных после завершения работы программы:
```markdown
Страницы, на которых найдены формы слова "ужин": 67, 54, 23, 55, 56
```