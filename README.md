## Документация

### Описание работы основных функций программы

Data class **TrieNode**
```kotlin
    data class TrieNode<Key>(var key: Key?, var parent: TrieNode<Key>?) {
        /*...*/
    }
```
Data class TrieNode реализует структуру единичной ноды префиксного дерева,
которое используется для хранения словаря словоформ.

Class **Trie**
```kotlin
    class Trie<Key> {
        /*...*/
    }
```
Class Trie реализует структуру префиксного дерева для хранения словаря словоформ.
Trie имеет методы: <br>
* __insert__ - добавляет слова в префиксное дерево
* __findIndex__ - ищет слово в префиксном дереве и возвращает его индекс. 
                  Если слово не найдено, функция возвращает значение -1
    > index - порядковый номер строчки в словаре, определяющий уникальный номер 
    конкретного слова и всех его словоформ
* __listForms__ - возвращает список из всех словоформ слова, принимая на вход 
само слово и его индекс

Функция **findWordInText**
```kotlin
    fun findWordInText(wordForms: List<String>, fileName: String, task: Int = 1)
            : Triple<HashSet<Int>, HashSet<String>, Long> {
        /*...*/
    }
```
Функция findWordInText построчно считывает файл с текстом, и осуществляет поиск словоформ 
конкретного слова. На выходе функция дает все встретившиеся в тексте словоформы конкретного 
слова, строчки на которых были найдены слова, количество словоформ, а также номера страниц, 
где были найдены словоформы слова. 
> Страницей считается набор из 45и последовательно идущих непустых строк

Функция **makeListOfTopUsedWords**
```kotlin
    fun findWordInText(wordForms: List<String>, fileName: String, task: Int = 1)
            : Triple<HashSet<Int>, HashSet<String>, Long> {
        /*...*/
    }
```
Функция makeListOfTopUsedWords построчно считывает файл с текстом, для каждого слова считает 
количество вхождений его первой словоформы в текст и создает Map из пар вида
<Индекс элемента, количество вхождений в текст> 

Функция **printMostUsedWords**
```kotlin
    fun printMostUsedWords(dict: Trie<Char>, fileName: String, topNWords: Int) {
        /*...*/
    }
```
Функция printMostUsedWords вызывает функцию makeListOfTopUsedWords и использует возвращаемое ею
значение для организации корректного вывода для команды вывести определенное количество наиболее
часто встречающихся слов. Функция сортирует полученное значение, поочередно идет по самым используемым 
индексам и определяет первую форму слова, с таким индексом до тех пор, пока не найдет среди них необходимое количество слов, соответствующих критериям:
* Длина более 4 символов
* Индекс не равен -1

Функция **findWordsFromCategory**
```kotlin
    fun findWordsFromCategory(category: String, dict: Trie<Char>, fileName: String)
            : HashSet<String> {
        /*...*/
    }
```
Функция findWordsFromCategory работает аналогично функции findWordInText, только проверяет 
слова в тексте на соответствие одной из словоформ хотя бы какого-нибудь из слов в указанной категории. 

Class **Interface : CliktCommand()** 
```kotlin
    class Interface : CliktCommand() {
        /*...*/
    }
```

Class Interface : CliktCommand() реализует интерфейс командной строки при использовании библиотеки CliKt 
и позволяет считывать аргументы по заданным ключам. Он основываясь на полученных от пользователя данных
проверяет их корректность и запускает определенный режим работы программы.

### Тестирование
Тесты находятся в файле src/test/kotlin/TextIndexTests <br>
Запустить тесты можно командой **gradle test**

### Запуск
Jar файл собирается по команде: **gradle runJar** <br>
Далее он запускается по команде: **java -jar build/libs/runnable-1.0-SNAPSHOT.jar** <br>
Желаемое поведение программы задается с помощью аргументов: <br>
Номер задания можно выбрать с помощью специального ключа: **"--task"** <br>
Поведение программы в зависимости от номера выбранного задания соответствует функционалу 
различных режимов 1, 2 и 3, указанных в файле "TASK.md" <br> 
Ключ для получения подсказок относительно управления: **"--help"** <br>
Задать слово для поиска: **"--word"** <br>
Задать категорию для поиска: **"--category"** <br>
Задать путь к файлу с текстом для анализа: **"--input"** <br>
Задать желаемый размер списка из наиболее употребляемых в тексте слов: **"--top"** <br>
Пример использования ключей: <br>
``` 
java -jar build/libs/runnable-1.0-SNAPSHOT.jar --task 2 --word ужин --category еда --top 10 --input ./data/Childhood.txt
```

### Входные данные <br>
Файл с текстом для анализа должен быть в формате .txt, путь к нему должен быть указан либо относительно 
точки входа в программу, либо абсолютным образом. <br> 
Слово для поиска должно содержать исключительно символы кириллицы и/или латиницы. <br> 
Желаемый размер списка из наиболее употребляемых в тексте слов не должен превышать общее количество 
различных слов в текстовом файле. <br> 
Указанная для поиска категория должна присутствовать в файле "data/categories.txt" <br>
Указанный номер задания должен равняться 1, 2 или 3. <br>

### Выходные данные
В результате работы программы в зависимости от задания выводятся различные данные полученные 
в процессе анализа заданного текста. <br> 
Пример выходных данных после завершения работы программы:
```markdown
Страницы, на которых найдены формы слова "ужин": 67, 54, 23, 55, 56
```